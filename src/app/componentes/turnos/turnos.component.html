<body>
    <section>
        <div class="container background">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card mb-4 box-shadow">
                        <div class="card-body">
                            <h1>Turnos</h1>

                            <div style="width: 100%;">
                                <div class="row row-12">
                                    <h3>Filtros</h3>
                                    <div class="col-md-3 my-3">
                                        <label for="firstName">Nombre especialista: </label>
                                        <input type="text" class="form-control"
                                            placeholder="ingrese nombre del especialista..."
                                            [(ngModel)]="this.filtroNombreEspecialista">
                                    </div>
                                    <div class="col-md-3 my-3">
                                        <label for="firstName">Apellido especialista: </label>
                                        <input type="text" class="form-control"
                                            placeholder="ingrese apellido del especialista..."
                                            [(ngModel)]="this.filtroApellidoEspecialista">
                                    </div>
                                    <div class="col-md-4 my-3">
                                        <label for="firstName">Especialidad: </label>
                                        <input type="text" class="form-control" placeholder="ingrese especialidad..."
                                            [(ngModel)]="this.filtroEspecialidad">
                                    </div>
                                    <hr>
                                </div>
                                <div class="estados" align="center">
                                    <a style="background-color: rgb(255, 255, 61);">Pendiente</a>
                                    <a style="background-color: rgb(2, 208, 2);">Aceptado</a>
                                    <a style="background-color: rgb(247, 93, 37);">Finalizado</a>
                                    <a style="background-color: rgb(250, 22, 22);">Cancelado</a>
                                    <a style="background-color: rgb(163, 13, 163);">Rechazado</a>
                                </div>
                                <table class="table table-striped  table-hover">
                                    <thead class="thead-dark" align="start">
                                        <tr>
                                            <th scope="col">Estado</th>
                                            <th scope="col">Fecha</th>
                                            <th scope="col">Paciente</th>
                                            <th scope="col">Especialidad</th>
                                            <th scope="col">Especialista</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody align="start">
                                        <tr
                                            *ngFor="let turno of (this.listTurnosCaragos | filtroTurnosXNameEspecialista: filtroNombreEspecialista
                                                                                         | filtroTurnosXLastnameEspecialista: filtroApellidoEspecialista
                                                                                         | filtroTurnosXEspecialidad: filtroEspecialidad)">

                                            <td style="font-weight: bold;color: rgb(255, 255, 61);text-shadow: 1px 1px 1px rgb(19, 19, 19);"                                           
                                                [ngClass]="{'cancelado': turno?.estado_turno == 'Cancelado'}">
                                                {{turno?.estado_turno}}
                                            </td>
                                            <td>{{turno?.fecha[0] +' - '+turno?.fecha[2]}}</td>
                                            <td>{{turno?.paciente.apellido + ' ' + turno?.paciente.nombre}}</td>
                                            <td>{{turno?.especialidad}}</td>
                                            <td>{{turno?.especialista.apellido + ' '+turno?.especialista.nombre }}</td>
                                            <td *ngIf="turno.estado_turno == 'Pendiente' || 
                                                       turno.estado_turno == 'Realizado' ||
                                                       turno.estado_turno == 'Rechazado'">
                                                <button class="mt-1 btn btn-outline-dark"
                                                    style="background-color: rgb(255, 255, 61);color: black;"
                                                    (click)='cancelarTurno(turno,content)'>Cancelar</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <ng-template #content let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Cancelacion de Turno</h4>
            <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
        </div>
        <div class="modal-body">
            <div class="mb-3">
                <label for="dateOfBirth">Comentario:</label>
                <div class="input-group">
                    <textarea class="form-control" placeholder="Ingrese un comentario"
                        [(ngModel)]="this.auxComentario"></textarea>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button"  class="btn btn-outline-dark btn-danger" (click)="modal.close('Save click')" [disabled]="this.auxComentario == ''">Cancelar Turno</button>
        </div>
    </ng-template>
</body>